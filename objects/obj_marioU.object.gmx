<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_NSMBU_mario_small_idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-8</depth>
  <persistent>0</persistent>
  <parentName>obj_mario</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
skid_nsmbu = 0
idle_start = 0
triple_jump = 0
triple_count = 0
steps_count = 0
step_inter = 0
polvo = 0
flip_count = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>walljump = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var steps_sound, jump_number;
if instance_exists(obj_levelmanager)
    pmeter = obj_levelmanager.pmeter
if (airspin &gt; 1)
{
    if (airspin &gt;= 8)
        airspin = 0
    else
        airspin += 0.7
}
if ((state == 1) &amp;&amp; ((isduck == 0) &amp;&amp; ((skidnow == 0) &amp;&amp; (global.bg_level != "underwater"))))
{
    if (pmeter &gt; 6)
        steps_sound = 7
    else if (abs(hspeed) &lt;= 1)
        steps_sound = 20
    else if (abs(hspeed) &lt;= 1.6)
        steps_sound = 15
    else if (abs(hspeed) &gt; 1.6)
        steps_sound = 10
    if (steps_count == 0)
    {
        if ((global.bg_level == "ground") || ((global.bg_level == "forest") || ((global.bg_level == "snow") || (global.bg_level == "sky"))))
        {
            if (collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_modelsolid, 0, 0) || (collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_ground2, 0, 0) || collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_ground3, 0, 0)))
            {
                if (step_inter == 0)
                    audio_play_sound(snd_NSMBU_step_normal1, 0, false)
                else
                    audio_play_sound(snd_NSMBU_step_normal2, 0, false)
            }
            else if (step_inter == 0)
                audio_play_sound(snd_NSMBU_step_block1, 0, false)
            else
                audio_play_sound(snd_NSMBU_step_block2, 0, false)
        }
        else if (global.bg_level == "airship")
        {
            if (collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_ground2, 0, 0) || collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_ground3, 0, 0))
            {
                if (step_inter == 0)
                    audio_play_sound(snd_NSMBU_step_normal1, 0, false)
                else
                    audio_play_sound(snd_NSMBU_step_normal2, 0, false)
            }
            else if collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_modelsolid, 0, 0)
            {
                if (step_inter == 0)
                    audio_play_sound(snd_NSMBU_step_airship, 0, false)
                else
                    audio_play_sound(snd_NSMBU_step_airship2, 0, false)
            }
            else if (step_inter == 0)
                audio_play_sound(snd_NSMBU_step_block1, 0, false)
            else
                audio_play_sound(snd_NSMBU_step_block2, 0, false)
        }
        else if (step_inter == 0)
            audio_play_sound(snd_NSMBU_step_block1, 0, false)
        else
            audio_play_sound(snd_NSMBU_step_block2, 0, false)
        if (step_inter == 0)
            step_inter = 1
        else
            step_inter = 0
        steps_count = steps_sound
    }
    else
        steps_count--
}
else
{
    steps_count = 0
    step_inter = 0
}
if ((iamkicking == 1) &amp;&amp; ((stompstyle == 0) &amp;&amp; (isduck == 0)))
{
    sprite_index = scr_NSMBU_kick()
    if (image_index &lt; 15)
        image_speed = 1
    else
    {
        if (state == 2)
        {
            sprite_index = scr_NSMBU_fall2()
            image_speed = 0
            image_index = 8
            jump_type = 2
        }
        iamkicking = 0
    }
}
else if (isduck == 0)
{
    if (global.powerup == 0)
        mask_index = spr_smallmask
    else
        mask_index = spr_bigmask
    if ((global.powerup == 2) || (global.powerup == -49))
    {
        if (firing &gt; 0)
            firing--
    }
    else
        firing = 0
    if (holding == 0)
    {
        if ((state &lt; 2) &amp;&amp; ((pmeter &gt; 5) &amp;&amp; (((direct == 1) &amp;&amp; ((hspeed &lt; 0) &amp;&amp; keyboard_check(global.derecha))) || ((direct == -1) &amp;&amp; ((hspeed &gt; 0) &amp;&amp; keyboard_check(global.izquierda))))))
        {
            sprite_index = scr_NSMBU_skid()
            image_speed = 0
            if (direct == 1)
                image_index = 1
            else
                image_index = 0
            if (skidnow == 0)
            {
                skidnow = 1
                skid_nsmbu = 1
                audio_play_sound(scr_snd_skid(), 1, true)
            }
        }
        else if ((skidnow == 1) &amp;&amp; ((state &lt; 2) &amp;&amp; ((direct == 1) &amp;&amp; ((hspeed &gt; 0) &amp;&amp; keyboard_check(global.derecha)))))
        {
            if (sprite_index != scr_NSMBU_skid_right())
            {
                sprite_index = scr_NSMBU_skid_right()
                image_index = 0
                audio_stop_sound(scr_snd_skid())
            }
            if (image_index &lt; 6)
                image_speed = 0.6
            else
            {
                sprite_index = scr_NSMBU_runmax()
                image_index = 0
                hspeed = 2.1
                if instance_exists(obj_levelmanager)
                {
                    with (obj_levelmanager)
                        pmeter = 6
                }
                skidnow = 0
            }
        }
        else if ((skidnow == 1) &amp;&amp; ((state &lt; 2) &amp;&amp; ((direct == -1) &amp;&amp; ((hspeed &lt; 0) &amp;&amp; keyboard_check(global.izquierda)))))
        {
            if (sprite_index != scr_NSMBU_skid_left())
            {
                sprite_index = scr_NSMBU_skid_left()
                image_index = 0
                audio_stop_sound(scr_snd_skid())
            }
            if (image_index &lt; 6)
                image_speed = 0.6
            else
            {
                sprite_index = scr_NSMBU_runmax()
                image_index = 0
                hspeed = -2.1
                if instance_exists(obj_levelmanager)
                {
                    with (obj_levelmanager)
                        pmeter = 6
                }
                skidnow = 0
            }
        }
        else if (state == 0)
        {
            if (groundpount &gt; 1)
            {
                if (groundpount &gt; 6)
                {
                    if keyboard_check(global.abajo)
                    {
                        sprite_index = scr_NSMBU_crouch_idle()
                        image_index = 0
                        groundpount = 0
                        disablecontrols = 0
                    }
                    else
                    {
                        if (sprite_index != scr_NSMBU_standup())
                        {
                            sprite_index = scr_NSMBU_standup()
                            image_index = 0
                        }
                        if (image_index &lt; 14)
                            image_speed = 0.6
                        else
                        {
                            image_speed = 0
                            image_index = 14
                            groundpount = 0
                            disablecontrols = 0
                        }
                    }
                }
                else
                {
                    sprite_index = scr_NSMBU_groundpound_stop()
                    image_speed = 0
                    image_index = 0
                    if (groundpount == 2)
                    {
                        with (instance_create(x, y, obj_smoke))
                        {
                            sprite_index = spr_NSMBU_smoke_groundpound
                            direct = 1
                            image_speed = 0.5
                            depth = -10
                        }
                        with (instance_create(x, y, obj_smoke))
                        {
                            sprite_index = spr_NSMBU_smoke_groundpound
                            direct = -1
                            image_speed = 0.5
                            depth = -10
                        }
                        audio_play_sound(snd_NSMBU_groundpount_stop, 0, false)
                    }
                    if keyboard_check(global.abajo)
                        groundpount += 0.3
                    else
                        groundpount++
                }
            }
            else if (firing &gt; 0)
            {
                image_speed = 0
                if ((firing &lt; 6) &amp;&amp; (firing &gt; 3))
                    image_index = 1
                else
                {
                    image_index = 0
                    sprite_index = scr_marioshoot()
                }
            }
            else
            {
                if (isswim == 1)
                    sprite_index = scr_NSMBU_idle()
                else if ((sprite_index != scr_NSMBU_idle()) &amp;&amp; ((sprite_index != scr_NSMBU_ground_idle()) &amp;&amp; ((sprite_index != scr_NSMBU_flip()) &amp;&amp; (sprite_index != scr_NSMBU_flip_start()))))
                {
                    if ((sprite_index != scr_NSMBU_fall1()) &amp;&amp; ((sprite_index != scr_NSMBU_fall2()) &amp;&amp; ((sprite_index != scr_NSMBU_fall3()) &amp;&amp; (sprite_index != scr_NSMBU_spinjump()))))
                        image_index = 5
                    else
                    {
                        image_index = 0
                        if (gravity == 0)
                        {
                            if (!audio_is_playing(snd_NSMBU_standup))
                                audio_play_sound(snd_NSMBU_standup, 0, false)
                        }
                    }
                    sprite_index = scr_NSMBU_ground_idle()
                }
                if (sprite_index == scr_NSMBU_ground_idle())
                {
                    if (image_index &lt; 10)
                        image_speed = 0.5
                    else
                        sprite_index = scr_NSMBU_idle()
                }
                else if (sprite_index == scr_NSMBU_idle())
                {
                    if (isswim == 0)
                    {
                        if (flip_count &lt; 600)
                            flip_count++
                        else
                        {
                            sprite_index = scr_NSMBU_flip_start()
                            flip_count = 0
                        }
                    }
                    image_speed = 0.5
                }
                else if (sprite_index == scr_NSMBU_flip_start())
                {
                    if (image_index &lt; 3)
                        image_speed = 0.5
                    else
                        sprite_index = scr_NSMBU_flip()
                }
                else if (sprite_index == scr_NSMBU_flip())
                    image_speed = 0.5
            }
        }
        else if (state == 1)
        {
            if (firing &gt; 0)
            {
                image_speed = 0
                if ((firing &lt; 6) &amp;&amp; (firing &gt; 3))
                    image_index = 1
                else
                {
                    image_index = 0
                    sprite_index = scr_marioshoot()
                }
            }
            else if (pmeter &lt; 6)
            {
                if (abs(hspeed) &lt;= 1.6)
                {
                    if ((sprite_index == scr_NSMBU_skid_right()) || (sprite_index == scr_NSMBU_skid_left()))
                    {
                        if (image_index &lt; 6)
                            image_speed = 0.5
                        else
                        {
                            sprite_index = scr_NSMBU_walk()
                            image_speed = 0.4
                        }
                    }
                    else
                    {
                        sprite_index = scr_NSMBU_walk()
                        if ((global.bg_level == "snow") &amp;&amp; (global.modo_noche == 1))
                        {
                            if (abs(hspeed) == 1.5)
                                image_speed = 1
                            else
                                image_speed = 0.8
                        }
                        else if (abs(hspeed) == 1.5)
                            image_speed = 0.6
                        else
                            image_speed = 0.4
                    }
                }
                else
                {
                    sprite_index = scr_NSMBU_run()
                    if ((global.bg_level == "snow") &amp;&amp; (global.modo_noche == 1))
                    {
                        if (abs(hspeed) &lt; 1.9)
                            image_speed = 0.8
                        else
                            image_speed = 1.1
                    }
                    else if (abs(hspeed) &lt; 1.9)
                        image_speed = 0.4
                    else
                        image_speed = 0.7
                }
            }
            else
            {
                if (polvo &lt; 5)
                    polvo++
                else
                {
                    if (hspeed &gt; 0)
                    {
                        with (instance_create((x - 20), (y + 18), obj_smoke))
                            image_speed = 0.8
                    }
                    else if (hspeed &lt; 0)
                    {
                        with (instance_create((x + 4), (y + 18), obj_smoke))
                            image_speed = 0.8
                    }
                    polvo = 0
                }
                sprite_index = scr_NSMBU_runmax()
                image_speed = 1
            }
        }
        else if (state == 2)
        {
            if (isswim == 1)
            {
                if (noisy == 0)
                {
                    if (vspeed &lt; 0)
                    {
                        if (sprite_index != scr_NSMBU_swim())
                        {
                            sprite_index = scr_NSMBU_swim()
                            image_index = 0
                        }
                        image_speed = 0.5
                    }
                    else
                    {
                        if (sprite_index != scr_NSMBU_swim_fall())
                        {
                            sprite_index = scr_NSMBU_swim_fall()
                            image_index = 0
                        }
                        image_speed = 0.5
                    }
                }
            }
            else if ((walljump == 1) &amp;&amp; (stompstyle == 0))
            {
                sprite_index = scr_NSMBU_wall_slide()
                image_speed = 0
                if (direct == 1)
                    image_index = 0
                else
                    image_index = 1
            }
            else if (groundpount != 0)
            {
                if (sprite_index != scr_NSMBU_groundpound())
                {
                    sprite_index = scr_NSMBU_groundpound()
                    image_index = 0
                }
                if (image_index &lt; 9)
                    image_speed = 1
                else
                {
                    image_speed = 0
                    image_index = 9
                    if (groundpount != 2)
                        groundpount = 2
                }
            }
            else if (triple_jump &gt; 1)
            {
                if (triple_jump == 2)
                {
                    if ((sprite_index != scr_NSMBU_triple_jump0()) &amp;&amp; ((sprite_index != scr_NSMBU_triple_jump1()) &amp;&amp; ((sprite_index != scr_NSMBU_airspin1()) &amp;&amp; (sprite_index != scr_NSMBU_airspin2()))))
                    {
                        if (choose(0, 1) == 0)
                        {
                            sprite_index = scr_NSMBU_triple_jump0()
                            image_index = 0
                            triple_number = 38
                        }
                        else
                        {
                            sprite_index = scr_NSMBU_triple_jump1()
                            image_index = 0
                            triple_number = 37
                        }
                    }
                }
                else
                {
                    if ((sprite_index != scr_NSMBU_triple_jump2()) &amp;&amp; ((sprite_index != scr_NSMBU_airspin1()) &amp;&amp; (sprite_index != scr_NSMBU_airspin2())))
                    {
                        sprite_index = scr_NSMBU_triple_jump2()
                        image_index = 0
                    }
                    triple_number = 43
                }
                if (image_index &lt; triple_number)
                    image_speed = 0.6
                else
                {
                    image_speed = 0
                    image_index = triple_number
                }
                if (airspin == 1)
                {
                    if ((image_speed == 0) &amp;&amp; (image_index == triple_number))
                    {
                        if (direct == 1)
                            sprite_index = scr_NSMBU_airspin1()
                        else
                            sprite_index = scr_NSMBU_airspin2()
                        image_index = 0
                        image_speed = 0.7
                    }
                    airspin_count += 0.7
                    if (airspin_count &gt;= 9.8)
                    {
                        if (triple_jump == 2)
                        {
                            if ((sprite_index == scr_NSMBU_airspin1()) || (sprite_index == scr_NSMBU_airspin2()))
                            {
                                if (triple_number == 38)
                                {
                                    sprite_index = scr_NSMBU_triple_jump0()
                                    image_index = triple_number
                                }
                                else
                                {
                                    sprite_index = scr_NSMBU_triple_jump1()
                                    image_index = triple_number
                                }
                            }
                        }
                        else if ((sprite_index == scr_NSMBU_airspin1()) || (sprite_index == scr_NSMBU_airspin2()))
                        {
                            sprite_index = scr_NSMBU_triple_jump2()
                            image_index = triple_number
                        }
                        airspin = 2
                        airspin_count = 0
                    }
                }
            }
            else if (airspin == 1)
            {
                if (direct == 1)
                {
                    if ((sprite_index != scr_NSMBU_airspin1()) &amp;&amp; (sprite_index != scr_NSMBU_airspin2()))
                    {
                        sprite_index = scr_NSMBU_airspin1()
                        image_index = 0
                    }
                    else if (sprite_index == scr_NSMBU_airspin2())
                        sprite_index = scr_NSMBU_airspin1()
                }
                else if ((sprite_index != scr_NSMBU_airspin2()) &amp;&amp; (sprite_index != scr_NSMBU_airspin1()))
                {
                    sprite_index = scr_NSMBU_airspin2()
                    image_index = 0
                }
                else if (sprite_index == scr_NSMBU_airspin1())
                    sprite_index = scr_NSMBU_airspin2()
                airspin_count += 0.7
                if (airspin_count &lt; 9.8)
                    image_speed = 0.7
                else
                {
                    if (vspeed &lt; 0)
                    {
                        jump_type = 3
                        sprite_index = scr_NSMBU_jump3()
                        image_speed = 0
                        image_index = 17
                    }
                    else if (vspeed &gt; 0)
                    {
                        jump_type = 3
                        sprite_index = scr_NSMBU_fall3()
                        image_speed = 0
                        image_index = 5
                    }
                    airspin = 2
                    airspin_count = 0
                }
            }
            else if (stompstyle == 1)
            {
                if (sprite_index != scr_NSMBU_spinjump())
                {
                    sprite_index = scr_NSMBU_spinjump()
                    image_index = 0
                }
                image_speed = 1
            }
            else if (firing &gt; 0)
            {
                image_speed = 0
                if ((firing &lt; 6) &amp;&amp; (firing &gt; 3))
                    image_index = 1
                else
                    image_index = 0
                sprite_index = scr_marioshoot()
            }
            else if (sprite_index == scr_NSMBU_groundpound_canceled())
            {
                if (image_index &lt; 4)
                    image_speed = 0.6
                else
                {
                    sprite_index = scr_NSMBU_fall2()
                    image_speed = 0
                    image_index = 8
                    jump_type = 2
                }
            }
            else if ((place_free(x, (y + 1)) &amp;&amp; (vspeed &gt; 0)) || collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0))
            {
                if (jump_type == 1)
                {
                    jump_number = 10
                    if (sprite_index != scr_NSMBU_fall1())
                    {
                        sprite_index = scr_NSMBU_fall1()
                        if (jumpnow == 0)
                            image_index = 4
                        else
                            image_index = 0
                    }
                }
                else if (jump_type == 2)
                {
                    jump_number = 8
                    if (sprite_index != scr_NSMBU_fall2())
                    {
                        sprite_index = scr_NSMBU_fall2()
                        if (jumpnow == 0)
                            image_index = 3
                        else
                            image_index = 0
                    }
                }
                else
                {
                    jump_number = 8
                    if (sprite_index != scr_NSMBU_fall3())
                    {
                        sprite_index = scr_NSMBU_fall3()
                        if (jumpnow == 0)
                            image_index = 4
                        else
                            image_index = 0
                    }
                }
                if (image_index != jump_number)
                    image_speed = 0.5
                else
                {
                    image_speed = 0
                    image_index = jump_number
                }
            }
            else
            {
                if (jump_type == 0)
                    jump_type = choose(1, 2, 3)
                if (jump_type == 1)
                {
                    jump_number = 17
                    if (sprite_index != scr_NSMBU_jump1())
                    {
                        sprite_index = scr_NSMBU_jump1()
                        image_index = 0
                    }
                }
                else if (jump_type == 2)
                {
                    jump_number = 16
                    if (sprite_index != scr_NSMBU_jump2())
                    {
                        sprite_index = scr_NSMBU_jump2()
                        image_index = 0
                    }
                }
                else
                {
                    jump_number = 17
                    if (sprite_index != scr_NSMBU_jump3())
                    {
                        sprite_index = scr_NSMBU_jump3()
                        image_index = 0
                    }
                }
                if (image_index != jump_number)
                    image_speed = 0.5
                else
                {
                    image_speed = 0
                    image_index = jump_number
                }
            }
        }
    }
    else
    {
        if (state == 0)
        {
            if ((sprite_index != scr_NSMBU_hold()) &amp;&amp; (sprite_index != scr_NSMBU_hold_ground()))
            {
                if ((sprite_index != scr_NSMBU_hold_jump()) &amp;&amp; (sprite_index != scr_NSMBU_hold_spinjump()))
                    image_index = 7
                else
                {
                    image_index = 0
                    if (gravity == 0)
                    {
                        if (!audio_is_playing(snd_NSMBU_standup))
                            audio_play_sound(snd_NSMBU_standup, 0, false)
                    }
                }
                sprite_index = scr_NSMBU_hold_ground()
            }
            else if (sprite_index == scr_NSMBU_hold_ground())
            {
                if (image_index &lt; 12)
                    image_speed = 0.5
                else
                    sprite_index = scr_NSMBU_hold()
            }
            else
            {
                if (sprite_index != scr_NSMBU_hold())
                {
                    sprite_index = scr_NSMBU_hold()
                    image_index = 0
                }
                image_speed = 0.5
            }
        }
        if (state == 1)
        {
            if (sprite_index != scr_NSMBU_walkhold())
            {
                sprite_index = scr_NSMBU_walkhold()
                image_index = 0
            }
            if (pmeter &lt; 6)
            {
                if (abs(hspeed) &lt;= 1.6)
                {
                    if ((global.bg_level == "snow") &amp;&amp; (global.modo_noche == 1))
                    {
                        if (abs(hspeed) == 1.5)
                            image_speed = 1
                        else
                            image_speed = 0.8
                    }
                    else if (abs(hspeed) == 1.5)
                        image_speed = 0.6
                    else
                        image_speed = 0.4
                }
                else if ((global.bg_level == "snow") &amp;&amp; (global.modo_noche == 1))
                {
                    if (abs(hspeed) &lt; 1.9)
                        image_speed = 0.8
                    else
                        image_speed = 1.1
                }
                else if (abs(hspeed) &lt; 1.9)
                    image_speed = 0.4
                else
                    image_speed = 0.7
            }
            else
                image_speed = 1
        }
        if (state == 2)
        {
            if (airspin == 1)
            {
                if (direct == 1)
                {
                    if (sprite_index != scr_NSMBU_hold_airspin())
                    {
                        sprite_index = scr_NSMBU_hold_airspin()
                        image_index = 0
                    }
                }
                else if (sprite_index != scr_NSMBU_hold_airspin())
                {
                    sprite_index = scr_NSMBU_hold_airspin()
                    image_index = 0
                }
                airspin_count += 0.7
                if (airspin_count &lt; 7.7)
                    image_speed = 0.7
                else
                {
                    jump_type = 3
                    sprite_index = scr_NSMBU_hold_jump()
                    image_speed = 0
                    image_index = 22
                    airspin = 2
                    airspin_count = 0
                }
            }
            else if (stompstyle == 1)
            {
                if (sprite_index != scr_NSMBU_hold_spinjump())
                {
                    sprite_index = scr_NSMBU_hold_spinjump()
                    image_index = 0
                }
                image_speed = 1
            }
            else
            {
                if (sprite_index != scr_NSMBU_hold_jump())
                {
                    sprite_index = scr_NSMBU_hold_jump()
                    image_index = 0
                }
                if (image_index &lt; 22)
                    image_speed = 0.6
                else
                {
                    image_speed = 0
                    image_index = 22
                }
            }
        }
    }
    if (state == 3)
    {
        sprite_index = scr_marioclimb()
        if (global.apariencia == 0)
        {
            if (vspeed == 0)
            {
                image_speed = 0
                image_index = 0
            }
            else
                image_speed = 0.15
        }
        else if (global.apariencia == 1)
        {
            if (speed == 0)
                image_speed = 0
            else
                image_speed = 0.25
        }
        else if (global.apariencia == 2)
        {
            if (speed == 0)
            {
                image_speed = 0
                image_index = 2
            }
            else
                image_speed = 0.25
        }
    }
}
else if (isduck == 1)
{
    if (global.powerup == 0)
        mask_index = spr_smallduckmask
    else
        mask_index = spr_smallmask
    if (airspin == 1)
    {
        if (sprite_index != scr_NSMBU_spincrouch())
        {
            sprite_index = scr_NSMBU_spincrouch()
            image_index = 0
        }
        airspin_count += 0.7
        if (airspin_count &lt; 9.8)
            image_speed = 0.7
        else
        {
            sprite_index = scr_NSMBU_crouch_idle()
            image_speed = 0.5
            airspin = 2
            airspin_count = 0
        }
    }
    else if (state == 2)
    {
        if (sprite_index != scr_NSMBU_crouch_jump())
        {
            sprite_index = scr_NSMBU_crouch_jump()
            image_index = 0
        }
        if (image_index &lt; 25)
            image_speed = 0.5
        else
        {
            image_speed = 0
            image_index = 25
        }
    }
    else
    {
        if (sprite_index == scr_NSMBU_crouch_jump())
        {
            sprite_index = scr_NSMBU_crouch_fall()
            image_index = 0
        }
        else if (sprite_index == scr_NSMBU_crouch_fall())
        {
            if (image_index &lt; 7)
                image_speed = 0.5
            else
            {
                sprite_index = scr_NSMBU_crouch_idle()
                image_index = 0
                image_speed = 0.5
            }
        }
        else if ((sprite_index != scr_NSMBU_crouch()) &amp;&amp; (sprite_index != scr_NSMBU_crouch_idle()))
        {
            sprite_index = scr_NSMBU_crouch()
            image_index = 0
            if (gravity == 0)
            {
                audio_stop_sound(snd_NSMBU_duck)
                audio_play_sound(snd_NSMBU_duck, 0, false)
            }
        }
        if (sprite_index == scr_NSMBU_crouch_idle())
            image_speed = 0.5
        else if (sprite_index != scr_NSMBU_crouch_fall())
        {
            if (image_index != 2)
                image_speed = 1
            else
            {
                sprite_index = scr_NSMBU_crouch_idle()
                image_speed = 0.5
            }
        }
        if (keyboard_check(global.derecha) &amp;&amp; ((!keyboard_check(global.izquierda)) &amp;&amp; (disablecontrols == 0)))
            direct = 1
        else if (keyboard_check(global.izquierda) &amp;&amp; ((!keyboard_check(global.derecha)) &amp;&amp; (disablecontrols == 0)))
            direct = -1
    }
}
if ((sprite_index != scr_NSMBU_skid()) &amp;&amp; ((sprite_index != scr_NSMBU_skid_right()) &amp;&amp; ((sprite_index != scr_NSMBU_skid_left()) &amp;&amp; ((skidnow == 1) &amp;&amp; (!instance_exists(obj_mario_transform2))))))
{
    audio_stop_sound(scr_snd_skid())
    skidnow = 0
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var colthwomps, col_solidtop, col_pinchos, col_enemigos, climb1;
colthwomps = collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_thwomp, 0, 0)
col_solidtop = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0)
col_pinchos = collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_pinchos, 0, 0)
col_enemigos = collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_enemyparent, 0, 0)
if (((col_solidtop &amp;&amp; ((y + 32) &lt; (col_solidtop.y + 8))) || (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_slopeparent, 1, 0) || (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_block_pow_hold, 0, 0) || ((colthwomps &amp;&amp; ((colthwomps.y &gt; y) &amp;&amp; (global.yoshi &gt; 0))) || ((colthwomps &amp;&amp; ((colthwomps.y &gt; y) &amp;&amp; ((invincible == 1) &amp;&amp; ((!instance_exists(obj_invincibility)) &amp;&amp; (stompstyle == 0))))) || ((collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_muncher, 0, 0) &amp;&amp; (global.yoshi &gt; 0)) || ((collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_muncher, 0, 0) &amp;&amp; (invincible == 1)) || ((col_enemigos &amp;&amp; ((global.apariencia == 4) &amp;&amp; ((col_enemigos.stomp != 1) &amp;&amp; ((col_enemigos.stomp != 2) &amp;&amp; (col_enemigos.stomp != 5))))) || ((collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_lava_water_drybones, 0, 0) &amp;&amp; instance_exists(obj_kuribo_drybones)) || ((col_pinchos &amp;&amp; (global.yoshi &gt; 0)) || ((col_pinchos &amp;&amp; (invincible == 1)) || (col_pinchos &amp;&amp; instance_exists(obj_invincibility))))))))))))) &amp;&amp; (gravity == 0))
{
    if (col_solidtop &amp;&amp; ((y != (col_solidtop.y - 32)) &amp;&amp; (((y + 32) &lt; (col_solidtop.y + 10)) &amp;&amp; (((y + 32) &gt; col_solidtop.y) &amp;&amp; (!instance_exists(obj_mario_transform2))))))
        y = (col_solidtop.y - 32)
    if (col_pinchos &amp;&amp; ((y != (col_pinchos.y - 32)) &amp;&amp; (((y + 32) &lt; (col_pinchos.y + 10)) &amp;&amp; (((y + 32) &gt; col_pinchos.y) &amp;&amp; (!instance_exists(obj_mario_transform2))))))
        y = (col_pinchos.y - 32)
    if (hspeed == 0)
        state = 0
    else
        state = 1
    statedelay = 0
    if ((instance_exists(obj_levelmanager) &amp;&amp; ((inplatform == 0) &amp;&amp; (collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_plataforma, 0, 0) || collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_plataforma_blue, 0, 0)))) || (collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_donut, 0, 0) || collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_estalactita, 0, 0)))
    {
        with (obj_levelmanager)
            fallw = 1
        inplatform = 1
    }
}
else
{
    if (statedelay &gt; 4)
        state = 2
    else
        statedelay++
    gravity = 0.05
}
if (vspeed &gt; 1)
    vspeed = 1
if ((keyboard_check_pressed(global.saltar) || keyboard_check_pressed(global.saltar_spin)) &amp;&amp; (disablecontrols == 0))
{
    vspeed = -1
    audio_play_sound(scr_swim(), 0, false)
    state = 2
    isduck = 0
    isduckhold = 0
}
if (keyboard_check_pressed(global.saltar_spin) &amp;&amp; ((disablecontrols == 0) &amp;&amp; ((holding == 3) &amp;&amp; (global.yoshi &gt; 0))))
{
    vspeed = -1
    audio_play_sound(scr_swim(), 0, false)
    state = 2
    isduck = 0
    isduckhold = 0
    global.yoshi = 0
    holding = 0
    if instance_exists(obj_yoshi2)
    {
        with (obj_yoshi2)
            event_user(1)
    }
    if instance_exists(obj_kuriboshoe)
    {
        stompstyle = 0
        with (obj_kuriboshoe)
            event_user(0)
    }
}
if (keyboard_check(global.derecha) &amp;&amp; ((!keyboard_check(global.izquierda)) &amp;&amp; ((disablecontrols == 0) &amp;&amp; ((isduck == 0) || (state == 2)))))
{
    hspeed += 0.06
    direct = 1
}
else if (keyboard_check(global.izquierda) &amp;&amp; ((!keyboard_check(global.derecha)) &amp;&amp; ((disablecontrols == 0) &amp;&amp; ((isduck == 0) || (state == 2)))))
{
    hspeed -= 0.06
    direct = -1
}
else
{
    if (hspeed &gt; 0)
        hspeed -= 0.05
    if (hspeed &lt; 0)
        hspeed += 0.05
    if (abs(hspeed) &lt; 0.05)
        hspeed = 0
}
if (state == 2)
{
    if (hspeed &gt; 1)
        hspeed = 1
    if (hspeed &lt; -1)
        hspeed = -1
}
else
{
    if (hspeed &gt; 0.5)
        hspeed = 0.5
    if (hspeed &lt; -0.5)
        hspeed = -0.5
}
if (noisy == 1)
{
    noisy = 0
    audio_stop_sound(scr_swim())
}
climb1 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0)
if (climb1 &amp;&amp; (((((y + 19) &gt; climb1.y) &amp;&amp; ((climb1.object_index == obj_vine_green) &amp;&amp; (climb1.image_index == 0))) || ((climb1.object_index != obj_vine_green) || (climb1.image_index != 0))) &amp;&amp; ((global.yoshi == 0) &amp;&amp; ((isduck == 0) &amp;&amp; ((keyboard_check(global.arriba) || (keyboard_check(global.abajo) &amp;&amp; (state == 2))) &amp;&amp; ((holding == 0) &amp;&amp; (disablecontrols == 0)))))))
{
    state = 3
    gravity = 0
    speed = 0
    isfloating = 0
    powerupfly = 0
    walljump = 0
    squirrelpropel = 0
    doublejump = 0
    if (floatnow == 1)
    {
        audio_stop_sound(snd_spin)
        floatnow = 0
    }
}
if (instance_exists(obj_lava_water) &amp;&amp; ((global.bg_level == "forest") &amp;&amp; ((global.modo_noche == 0) &amp;&amp; ((y + 16) &lt;= (obj_lava_water.y - 4)))))
{
    isswim = 0
    if place_meeting(x, (y + 16), obj_lava_water)
    {
        if ((global.apariencia != 0) &amp;&amp; (vspeed &gt; 0))
        {
            with (instance_create(x, (y + 7), obj_smoke))
            {
                if (global.apariencia == 1)
                    sprite_index = spr_SMB3_splash
                else if (global.apariencia == 2)
                    sprite_index = spr_splash
                depth = -10
            }
        }
        if keyboard_check(global.saltar)
        {
            vspeed = -4.125
            jumpnow = 1
            if (global.apariencia != 0)
            {
                with (instance_create(x, (y + 7), obj_smoke))
                {
                    if (global.apariencia == 1)
                        sprite_index = spr_SMB3_splash
                    else if (global.apariencia == 2)
                        sprite_index = spr_splash
                    depth = -10
                }
            }
        }
    }
    if (noisy == 1)
    {
        noisy = 0
        audio_stop_sound(scr_swim())
    }
}
if (global.yoshi != 2)
    stompstyle = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var colthwomps, col_solidtop, col_pinchos, climb1;
colthwomps = collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_thwomp, 0, 0)
col_solidtop = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0)
col_pinchos = collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_pinchos, 0, 0)
if (((col_solidtop &amp;&amp; ((y + 32) &lt; (col_solidtop.y + 8))) || (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_slopeparent, 1, 0) || (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_block_pow_hold, 0, 0) || ((colthwomps &amp;&amp; ((colthwomps.y &gt; y) &amp;&amp; (global.yoshi &gt; 0))) || ((colthwomps &amp;&amp; ((colthwomps.y &gt; y) &amp;&amp; ((invincible == 1) &amp;&amp; ((!instance_exists(obj_invincibility)) &amp;&amp; (stompstyle == 0))))) || ((collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_muncher, 0, 0) &amp;&amp; (global.yoshi &gt; 0)) || ((collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_muncher, 0, 0) &amp;&amp; (invincible == 1)) || ((collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_lava_water_drybones, 0, 0) &amp;&amp; instance_exists(obj_kuribo_drybones)) || ((col_pinchos &amp;&amp; (global.yoshi &gt; 0)) || ((col_pinchos &amp;&amp; (invincible == 1)) || (col_pinchos &amp;&amp; instance_exists(obj_invincibility)))))))))))) &amp;&amp; (gravity == 0))
{
    if (col_solidtop &amp;&amp; ((y != (col_solidtop.y - 32)) &amp;&amp; (((y + 32) &lt; (col_solidtop.y + 10)) &amp;&amp; (((y + 32) &gt; col_solidtop.y) &amp;&amp; (!instance_exists(obj_mario_transform2))))))
        y = (col_solidtop.y - 32)
    if (col_pinchos &amp;&amp; ((y != (col_pinchos.y - 32)) &amp;&amp; (((y + 32) &lt; (col_pinchos.y + 10)) &amp;&amp; (((y + 32) &gt; col_pinchos.y) &amp;&amp; (!instance_exists(obj_mario_transform2))))))
        y = (col_pinchos.y - 32)
    if (hspeed == 0)
        state = 0
    else
        state = 1
    statedelay = 0
    if (groundpount == 1)
        groundpount = 0
    if (triple_jump != 0)
    {
        triple_count++
        if (triple_count &gt; 6)
        {
            triple_jump = 0
            triple_count = 0
        }
    }
}
else
{
    inplatform = 0
    if (statedelay &gt; 4)
        state = 2
    else
        statedelay++
}
if ((groundpount == 0) &amp;&amp; (disablecontrols == 2))
    disablecontrols = 0
if (((airspin == 1) &amp;&amp; (vspeed &gt;= 0)) || (groundpount == 1))
{
    vspeed = 0
    gravity = 0
}
else if (groundpount == 2)
{
    if (vspeed &gt; 10)
        vspeed = 10
}
else if (vspeed &gt; 4)
    vspeed = 4
if (keyboard_check_pressed(global.abajo) &amp;&amp; ((global.apariencia == 3) &amp;&amp; ((disablecontrols == 0) &amp;&amp; ((state == 2) &amp;&amp; ((isduck == 0) &amp;&amp; ((holding == 0) &amp;&amp; ((iamkicking == 0) &amp;&amp; ((global.yoshi == 0) &amp;&amp; ((airspin != 1) &amp;&amp; ((groundpount == 0) &amp;&amp; ((walljump == 0) &amp;&amp; (stompstyle == 0))))))))))))
{
    image_index = 0
    groundpount = 1
    airspin = 0
    hspeed = 0
    disablecontrols = 2
    audio_play_sound(snd_NSMBU_groundpound, 0, false)
}
if (keyboard_check_pressed(global.arriba) &amp;&amp; ((global.apariencia == 3) &amp;&amp; ((disablecontrols == 2) &amp;&amp; ((state == 2) &amp;&amp; ((groundpount == 2) &amp;&amp; (stompstyle == 0))))))
{
    sprite_index = scr_NSMBU_groundpound_canceled()
    image_speed = 0.6
    image_index = 0
    groundpount = 0
    disablecontrols = 0
}
if keyboard_check(global.lanzar_agarrar)
{
    if instance_exists(obj_invincibility)
        hspeedmax = 4
    else
        hspeedmax = 3
}
else if instance_exists(obj_invincibility)
    hspeedmax = 2.3
else
    hspeedmax = 1.5
if (keyboard_check_pressed(global.saltar) &amp;&amp; ((disablecontrols == 0) &amp;&amp; ((jumpnow == 0) &amp;&amp; (state &lt; 2))))
{
    if ((pmeter &gt;= 6) &amp;&amp; (((instance_exists(obj_invincibility) &amp;&amp; (abs(hspeed) &gt; 3.5)) || ((!instance_exists(obj_invincibility)) &amp;&amp; (abs(hspeed) &gt; 2.5))) &amp;&amp; ((isduck == 0) &amp;&amp; (holding == 0))))
    {
        if (triple_jump == 3)
            triple_jump = 0
        else
            triple_jump++
        triple_count = 0
    }
    else
        triple_jump = 0
    if (triple_jump == 3)
    {
        if ((global.bg_level == "sky") &amp;&amp; (global.modo_noche == 1))
            vspeed = -3.65
        else
            vspeed = -4.65
    }
    else if (abs(hspeed) &gt; 2.8)
    {
        if ((global.bg_level == "sky") &amp;&amp; (global.modo_noche == 1))
            vspeed = -3.3
        else
            vspeed = -4.3
    }
    else if ((global.bg_level == "sky") &amp;&amp; (global.modo_noche == 1))
    {
        if (round((hspeed / 2)) == 0)
            vspeed = -2.85
        else
            vspeed = -2.95
    }
    else if (round((hspeed / 2)) == 0)
        vspeed = -3.95
    else
        vspeed = -4.05
    audio_play_sound(scr_jump(), 0, false)
    if (triple_jump == 2)
        audio_play_sound(snd_NSMBU_triplejump_0, 0, false)
    else if (triple_jump == 3)
        audio_play_sound(choose(436, 437, 438), 0, false)
    jumpnow = 1
    state = 2
}
if ((keyboard_check_pressed(global.saltar_spin) &amp;&amp; ((disablecontrols == 0) &amp;&amp; ((holding &lt; 3) &amp;&amp; ((isduck == 0) &amp;&amp; ((jumpnow == 0) &amp;&amp; (state &lt; 2)))))) || (keyboard_check_pressed(global.saltar_spin) &amp;&amp; ((disablecontrols == 0) &amp;&amp; ((holding == 3) &amp;&amp; ((isduck == 0) &amp;&amp; ((global.yoshi &gt; 0) &amp;&amp; ((vspeed == 0) &amp;&amp; ((jumpnow == 0) &amp;&amp; (state &lt; 2)))))))))
{
    triple_jump = 0
    triple_count = 0
    image_index = 0
    if (abs(hspeed) &gt; 2.8)
    {
        if ((global.bg_level == "sky") &amp;&amp; (global.modo_noche == 1))
            vspeed = -2.3
        else
            vspeed = -3.3
    }
    else if ((global.bg_level == "sky") &amp;&amp; (global.modo_noche == 1))
    {
        if (round((hspeed / 2)) == 0)
            vspeed = -2.3
        else
            vspeed = -2.3
    }
    else if (round((hspeed / 2)) == 0)
        vspeed = -3.3
    else
        vspeed = -3.3
    jumpnow = 1
    state = 2
    isduck = 0
    y--
    stompstyle = 1
    audio_play_sound(scr_snd_spinjump(), 0, false)
    alarm[7] = 10
    if (global.yoshi &gt; 0)
    {
        global.yoshi = 0
        holding = 0
        if (direct &gt; 0)
            hspeed = -1.2
        else
            hspeed = 1.2
        if instance_exists(obj_yoshi2)
        {
            with (obj_yoshi2)
                event_user(1)
        }
    }
}
else if (keyboard_check_pressed(global.saltar_spin) &amp;&amp; ((global.apariencia == 3) &amp;&amp; ((disablecontrols == 0) &amp;&amp; ((state == 2) &amp;&amp; ((global.yoshi == 0) &amp;&amp; ((airspin == 0) &amp;&amp; ((walljump != 1) &amp;&amp; ((groundpount != 1) &amp;&amp; (stompstyle == 0)))))))))
{
    if (triple_jump == 0)
        image_index = 0
    airspin = 1
    groundpount = 0
    audio_play_sound(snd_NSMBU_airspin, 0, false)
}
if ((keyboard_check_released(global.saltar) &amp;&amp; (jumpnow == 1)) || (keyboard_check_released(global.saltar_spin) &amp;&amp; (jumpnow == 1)))
    jumpnow = 2
if ((isduck == 1) &amp;&amp; (state != 2))
{
    if (snow == 1)
    {
        if (hspeed &gt; 0)
            hspeed -= 0.01
        if (hspeed &lt; 0)
            hspeed += 0.01
        if (abs(hspeed) &lt; 0.01)
            hspeed = 0
    }
    else
    {
        if (hspeed &gt; 0)
            hspeed -= 0.05
        if (hspeed &lt; 0)
            hspeed += 0.05
        if (abs(hspeed) &lt; 0.05)
            hspeed = 0
    }
}
else
{
    if (keyboard_check(global.derecha) &amp;&amp; ((!keyboard_check(global.izquierda)) &amp;&amp; (disablecontrols == 0)))
    {
        if ((holding == 2) &amp;&amp; ((direct != 1) &amp;&amp; ((stompstyle == 0) &amp;&amp; (global.apariencia == 2))))
        {
            turning = 1
            alarm[11] = 7
        }
        if (hspeed &lt; hspeedmax)
        {
            if (isslip == 1)
                hspeed += 0.04
            else if ((snow == 1) &amp;&amp; (gravity == 0))
            {
                if (hspeed &lt; 0)
                    hspeed += 0.01
                else
                    hspeed += 0.05
            }
            else
            {
                if (hspeed &lt; 0)
                    hspeed += 0.075
                hspeed += 0.06
            }
        }
        if ((walljump == 0) &amp;&amp; ((modo_vuelo == 0) &amp;&amp; ((global.apariencia != 0) || ((global.apariencia == 0) &amp;&amp; (state != 2)))))
            direct = 1
    }
    else if (keyboard_check(global.izquierda) &amp;&amp; ((!keyboard_check(global.derecha)) &amp;&amp; (disablecontrols == 0)))
    {
        if ((holding == 2) &amp;&amp; ((direct != -1) &amp;&amp; ((stompstyle == 0) &amp;&amp; (global.apariencia == 2))))
        {
            turning = 1
            alarm[11] = 7
        }
        if (hspeed &gt; (-hspeedmax))
        {
            if (isslip == 1)
                hspeed -= 0.04
            else if ((snow == 1) &amp;&amp; (gravity == 0))
            {
                if (hspeed &gt; 0)
                    hspeed += -0.04
                else
                    hspeed += -0.06
            }
            else
            {
                if (hspeed &gt; 0)
                    hspeed += -0.075
                hspeed += -0.06
            }
        }
        if ((walljump == 0) &amp;&amp; ((modo_vuelo == 0) &amp;&amp; ((global.apariencia != 0) || ((global.apariencia == 0) &amp;&amp; (state != 2)))))
            direct = -1
    }
    else if (state != 2)
    {
        if (isslip == 0)
        {
            if (snow == 1)
            {
                if (hspeed &gt; 0)
                    hspeed -= 0.005
                else if (hspeed &lt; 0)
                    hspeed += 0.005
                if (abs(hspeed) &lt; 0.005)
                    hspeed = 0
            }
            else
            {
                if (hspeed &gt; 0)
                    hspeed -= 0.05
                else if (hspeed &lt; 0)
                    hspeed += 0.05
                if (abs(hspeed) &lt; 0.05)
                    hspeed = 0
            }
        }
        else
        {
            if (hspeed &gt; 0)
                hspeed -= 0.025
            else if (hspeed &lt; 0)
                hspeed += 0.025
            if (abs(hspeed) &lt; 0.025)
                hspeed = 0
        }
    }
    if ((state != 2) &amp;&amp; (abs(hspeed) &gt; hspeedmax))
    {
        if (hspeed &gt; 0)
            hspeed -= 0.025
        else if (hspeed &lt; 0)
            hspeed += 0.025
        if (abs(hspeed) &lt; 0.025)
            hspeed = 0
    }
}
if ((state == 2) || (statedelay &gt; 0))
{
    if ((pmeter &lt; 6) &amp;&amp; (triple_jump != 0))
        triple_jump = 0
    if ((vspeed &gt; 0) &amp;&amp; ((isduck == 0) &amp;&amp; ((groundpount == 0) &amp;&amp; ((walljump == 0) &amp;&amp; ((holding == 0) &amp;&amp; (global.yoshi == 0))))))
    {
        if (keyboard_check(global.derecha) &amp;&amp; (direct == 1))
        {
            if (collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_solid, 0, 1) || (collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_pinchos, 0, 1) || (collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_bullebill_base, 0, 1) || (collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_cannon, 0, 1) || (collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_muncher, 0, 1) || (collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_block_pow_hold, 0, 1) || collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_onewaygate_left, 0, 1)))))))
            {
                walljump = 1
                airspin = 0
                airspin_count = 0
                jump_number = 1
                triple_jump = 0
                triple_count = 0
                audio_play_sound(snd_NSMBU_desllizarse_walljump, 1, true)
            }
            else
                walljump = 0
        }
        else if (keyboard_check(global.izquierda) &amp;&amp; (direct == -1))
        {
            if (collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_solid, 0, 1) || (collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_pinchos, 0, 1) || (collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_bullebill_base, 0, 1) || (collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_cannon, 0, 1) || (collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_muncher, 0, 1) || (collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_block_pow_hold, 0, 1) || collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_onewaygate_right, 0, 1)))))))
            {
                walljump = 1
                airspin = 0
                airspin_count = 0
                jump_number = 1
                triple_jump = 0
                triple_count = 0
                audio_play_sound(snd_NSMBU_desllizarse_walljump, 1, true)
            }
            else
                walljump = 0
        }
        else
        {
            walljump = 0
            audio_stop_sound(snd_NSMBU_desllizarse_walljump)
        }
    }
    if (walljump == 1)
    {
        if ((state &lt; 2) || (isswim == 1))
            walljump = 0
        if (((direct &lt; 0) &amp;&amp; ((!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 0, 1)) &amp;&amp; ((!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_pinchos, 0, 1)) &amp;&amp; ((!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 0, 1)) &amp;&amp; ((!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_muncher, 0, 1)) &amp;&amp; ((!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_block_pow_hold, 0, 1)) &amp;&amp; ((!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_cannon, 0, 1)) &amp;&amp; (!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_onewaygate_right, 0, 1))))))))) || ((direct &gt; 0) &amp;&amp; ((!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_solid, 0, 1)) &amp;&amp; ((!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_pinchos, 0, 1)) &amp;&amp; ((!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_bullebill_base, 0, 1)) &amp;&amp; ((!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_muncher, 0, 1)) &amp;&amp; ((!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_block_pow_hold, 0, 1)) &amp;&amp; ((!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_cannon, 0, 1)) &amp;&amp; (!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_onewaygate_left, 0, 1))))))))))
            walljump = 0
        if (stompstyle == 0)
        {
            if ((global.modo_noche == 1) &amp;&amp; (global.bg_level == "sky"))
            {
                gravity = 0.1
                if (vspeed &gt; 1)
                    vspeed = 1
            }
            else
            {
                gravity = 0.2
                if (vspeed &gt; 1.6)
                    vspeed = 1.6
            }
            if (polvo &lt; 6)
                polvo++
            else
            {
                if (direct == 1)
                {
                    with (instance_create(x, y, obj_smoke))
                        image_speed = 0.8
                }
                else
                {
                    with (instance_create((x - 16), y, obj_smoke))
                        image_speed = 0.8
                }
                polvo = 0
            }
        }
        if keyboard_check_pressed(global.saltar)
        {
            if ((global.modo_noche == 1) &amp;&amp; (global.bg_level == "sky"))
                vspeed = -2.625
            else
                vspeed = -3.625
            jumpnow = 1
            stompstyle = 0
            alarm[11] = 10
            if (direct &gt; 0)
            {
                hspeed = -3.125
                walljump = 2
                direct = -1
                audio_play_sound(choose(439, 440), 1, false)
                with (instance_create(bbox_right, y, obj_smoke))
                {
                    sprite_index = spr_NSMBU_smoke_wall
                    direct = -1
                }
            }
            else if (direct &lt; 0)
            {
                hspeed = 3.125
                walljump = 2
                direct = 1
                audio_play_sound(choose(439, 440), 1, false)
                with (instance_create(bbox_left, y, obj_smoke))
                {
                    sprite_index = spr_NSMBU_smoke_wall
                    direct = 1
                }
            }
        }
        else if keyboard_check_pressed(global.saltar_spin)
        {
            if ((global.modo_noche == 1) &amp;&amp; (global.bg_level == "sky"))
                vspeed = -2.625
            else
                vspeed = -3.625
            jumpnow = 1
            stompstyle = 1
            alarm[11] = 10
            if (direct &gt; 0)
            {
                hspeed = -3.125
                walljump = 2
                direct = -1
                audio_play_sound(snd_NSMBU_spinjump, 1, false)
                with (instance_create(bbox_right, y, obj_smoke))
                {
                    sprite_index = spr_NSMBU_smoke_wall
                    direct = -1
                }
            }
            else if (direct &lt; 0)
            {
                hspeed = 3.125
                walljump = 2
                direct = 1
                audio_play_sound(snd_NSMBU_spinjump, 1, false)
                with (instance_create(bbox_left, y, obj_smoke))
                {
                    sprite_index = spr_NSMBU_smoke_wall
                    direct = 1
                }
            }
        }
    }
    else if ((global.modo_noche == 1) &amp;&amp; (global.bg_level == "sky"))
    {
        gravity = 0.05
        if (groundpount == 2)
        {
            if (vspeed &gt; 2)
                vspeed = 3
        }
        else if (vspeed &gt; 1)
            vspeed = 1
    }
    else if ((vspeed &gt; -1) || (jumpnow != 1))
    {
        if (groundpount == 2)
            gravity = 0.6
        else
            gravity = 0.3
        if (jumpnow == 1)
            jumpnow = 2
    }
    else if (groundpount == 2)
        gravity = 0.2
    else
        gravity = 0.1
}
climb1 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0)
if (climb1 &amp;&amp; (((((y + 19) &gt; climb1.y) &amp;&amp; ((climb1.object_index == obj_vine_green) &amp;&amp; (climb1.image_index == 0))) || ((climb1.object_index != obj_vine_green) || (climb1.image_index != 0))) &amp;&amp; ((global.yoshi == 0) &amp;&amp; ((isduck == 0) &amp;&amp; ((keyboard_check(global.arriba) || (keyboard_check(global.abajo) &amp;&amp; (state == 2))) &amp;&amp; ((holding == 0) &amp;&amp; (disablecontrols == 0)))))))
{
    state = 3
    gravity = 0
    speed = 0
    isfloating = 0
    powerupfly = 0
    walljump = 0
    squirrelpropel = 0
    doublejump = 0
    airspin = 0
    groundpount = 0
}
if (stompstyle == 1)
{
    if (state != 2)
        stompstyle = 0
}
if ((walljump == 0) &amp;&amp; audio_is_playing(snd_NSMBU_desllizarse_walljump))
    audio_stop_sound(snd_NSMBU_desllizarse_walljump)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
